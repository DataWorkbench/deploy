apiVersion: qy.dataworkbench.com/v1
kind: HDFS
metadata:
  name: {{ .Release.Name }}
spec:
  version: 2.7.2
  #storageClass: csi-ssd-enterprise
  namenode:
    name: namenode
    storageClass: {{ include "hdfs.fullname" . }}-namenode-sc
    #Capacity: 10Gi
    replicas: {{ len .Values.namenode.nodes }}
  journalnode:
    name: journalnode
    storageClass: {{ include "hdfs.fullname" . }}-journalnode-sc
    #Capacity: 10Gi
    replicas: {{ len .Values.journalnode.nodes }}
  datanode:
    name: datanode
    storageClass: {{ include "hdfs.fullname" . }}-datanode-sc
    replicas: {{ len .Values.datanode.nodes }}
  zkQuorum: zk-0.zk-hs.{{ .Release.Namespace }}.svc.cluster.local:2181,zk-1.zk-hs.{{ .Release.Namespace }}.svc.cluster.local:2181,zk-2.zk-hs.{{ .Release.Namespace }}.svc.cluster.local:2181
  clusterConfig:
    - property: "dfs.namenode.handler.count"
      value: "10"
    - property: "dfs.datanode.handler.count"
      value: "10"
    - property: "dfs.replication"
      value: "2"